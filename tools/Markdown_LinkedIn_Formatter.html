<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown to LinkedIn Formatter</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            margin: 0;
            padding: 20px;
            background-color: #f0f2f5; /* LinkedIn-ish background */
            color: #1c1e21;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 800px;
            box-sizing: border-box;
        }

        h1 {
            color: #0a66c2; /* LinkedIn Blue */
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 1.1em;
        }

        textarea {
            width: 100%;
            min-height: 150px;
            padding: 12px;
            border: 1px solid #ccd0d5;
            border-radius: 6px;
            font-size: 1em;
            line-height: 1.5;
            box-sizing: border-box;
            margin-bottom: 20px;
            resize: vertical;
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; /* Monospace for markdown input */
        }

        #output {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; /* System font for output */
            background-color: #f9f9f9;
        }

        button {
            background-color: #0a66c2; /* LinkedIn Blue */
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease;
            display: block;
            margin: 20px auto 0;
        }

        button:hover {
            background-color: #004182; /* Darker LinkedIn Blue */
        }
        button:active {
            transform: scale(0.98);
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            font-size: 0.9em;
            color: #606770;
        }
        .footer a {
            color: #0a66c2;
            text-decoration: none;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        .warning {
            font-size: 0.85em;
            color: #777;
            margin-top: 15px;
            padding: 10px;
            background-color: #fffbe6;
            border: 1px solid #ffe58f;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Markdown to LinkedIn Formatter</h1>

        <label for="markdownInput" class="label">Enter Markdown Text:</label>
        <textarea id="markdownInput" placeholder="**Bold text**, *italic text*, `code`..."></textarea>

        <label for="output" class="label">LinkedIn Formatted Text:</label>
        <textarea id="output" readonly placeholder="Formatted text will appear here..."></textarea>

        <button id="copyButton">Copy to Clipboard</button>

        <div class="warning">
            <strong>Note:</strong> While Unicode characters create visual styles, they may not be fully accessible to screen readers. Use them thoughtfully.
        </div>
    </div>

    <div class="footer">
        <p>A simple tool for LinkedIn post formatting.</p>
        <p>Discover more widgets at <a href="https://cgee.nz/widgets" target="_blank" rel="noopener noreferrer">Chris Barlow's Widget Workshop!</a></p>
    </div>

    <script>
        const markdownInput = document.getElementById('markdownInput');
        const outputTextarea = document.getElementById('output');
        const copyButton = document.getElementById('copyButton');

        const unicodeMaps = {
            sansBold: {
                'A':'ð—”', 'B':'ð—•', 'C':'ð—–', 'D':'ð——', 'E':'ð—˜', 'F':'ð—™', 'G':'ð—š', 'H':'ð—›', 'I':'ð—œ', 'J':'ð—', 'K':'ð—ž', 'L':'ð—Ÿ', 'M':'ð— ', 'N':'ð—¡', 'O':'ð—¢', 'P':'ð—£', 'Q':'ð—¤', 'R':'ð—¥', 'S':'ð—¦', 'T':'ð—§', 'U':'ð—¨', 'V':'ð—©', 'W':'ð—ª', 'X':'ð—«', 'Y':'ð—¬', 'Z':'ð—­',
                'a':'ð—®', 'b':'ð—¯', 'c':'ð—°', 'd':'ð—±', 'e':'ð—²', 'f':'ð—³', 'g':'ð—´', 'h':'ð—µ', 'i':'ð—¶', 'j':'ð—·', 'k':'ð—¸', 'l':'ð—¹', 'm':'ð—º', 'n':'ð—»', 'o':'ð—¼', 'p':'ð—½', 'q':'ð—¾', 'r':'ð—¿', 's':'ð˜€', 't':'ð˜', 'u':'ð˜‚', 'v':'ð˜ƒ', 'w':'ð˜„', 'x':'ð˜…', 'y':'ð˜†', 'z':'ð˜‡',
                '0':'ðŸ¬', '1':'ðŸ­', '2':'ðŸ®', '3':'ðŸ¯', '4':'ðŸ°', '5':'ðŸ±', '6':'ðŸ²', '7':'ðŸ³', '8':'ðŸ´', '9':'ðŸµ'
            },
            sansItalic: {
                'A':'ð˜ˆ', 'B':'ð˜‰', 'C':'ð˜Š', 'D':'ð˜‹', 'E':'ð˜Œ', 'F':'ð˜', 'G':'ð˜Ž', 'H':'ð˜', 'I':'ð˜', 'J':'ð˜‘', 'K':'ð˜’', 'L':'ð˜“', 'M':'ð˜”', 'N':'ð˜•', 'O':'ð˜–', 'P':'ð˜—', 'Q':'ð˜˜', 'R':'ð˜™', 'S':'ð˜š', 'T':'ð˜›', 'U':'ð˜œ', 'V':'ð˜', 'W':'ð˜ž', 'X':'ð˜Ÿ', 'Y':'ð˜ ', 'Z':'ð˜¡',
                'a':'ð˜¢', 'b':'ð˜£', 'c':'ð˜¤', 'd':'ð˜¥', 'e':'ð˜¦', 'f':'ð˜§', 'g':'ð˜¨', 'h':'ð˜©', 'i':'ð˜ª', 'j':'ð˜«', 'k':'ð˜¬', 'l':'ð˜­', 'm':'ð˜®', 'n':'ð˜¯', 'o':'ð˜°', 'p':'ð˜±', 'q':'ð˜²', 'r':'ð˜³', 's':'ð˜´', 't':'ð˜µ', 'u':'ð˜¶', 'v':'ð˜·', 'w':'ð˜¸', 'x':'ð˜¹', 'y':'ð˜º', 'z':'ð˜»'
                // Numbers typically don't have a common sans-italic unicode variant that works universally
            },
            sansBoldItalic: {
                'A':'ð˜¼', 'B':'ð˜½', 'C':'ð˜¾', 'D':'ð˜¿', 'E':'ð™€', 'F':'ð™', 'G':'ð™‚', 'H':'ð™ƒ', 'I':'ð™„', 'J':'ð™…', 'K':'ð™†', 'L':'ð™‡', 'M':'ð™ˆ', 'N':'ð™‰', 'O':'ð™Š', 'P':'ð™‹', 'Q':'ð™Œ', 'R':'ð™', 'S':'ð™Ž', 'T':'ð™', 'U':'ð™', 'V':'ð™‘', 'W':'ð™’', 'X':'ð™“', 'Y':'ð™”', 'Z':'ð™•',
                'a':'ð™–', 'b':'ð™—', 'c':'ð™˜', 'd':'ð™™', 'e':'ð™š', 'f':'ð™›', 'g':'ð™œ', 'h':'ð™', 'i':'ð™ž', 'j':'ð™Ÿ', 'k':'ð™ ', 'l':'ð™¡', 'm':'ð™¢', 'n':'ð™£', 'o':'ð™¤', 'p':'ð™¥', 'q':'ð™¦', 'r':'ð™§', 's':'ð™¨', 't':'ð™©', 'u':'ð™ª', 'v':'ð™«', 'w':'ð™¬', 'x':'ð™­', 'y':'ð™®', 'z':'ð™¯'
                 // Numbers typically don't have a common sans-bold-italic unicode variant
            },
            monospace: {
                'A':'ð™°', 'B':'ð™±', 'C':'ð™²', 'D':'ð™³', 'E':'ð™´', 'F':'ð™µ', 'G':'ð™¶', 'H':'ð™·', 'I':'ð™¸', 'J':'ð™¹', 'K':'ð™º', 'L':'ð™»', 'M':'ð™¼', 'N':'ð™½', 'O':'ð™¾', 'P':'ð™¿', 'Q':'ðš€', 'R':'ðš', 'S':'ðš‚', 'T':'ðšƒ', 'U':'ðš„', 'V':'ðš…', 'W':'ðš†', 'X':'ðš‡', 'Y':'ðšˆ', 'Z':'ðš‰',
                'a':'ðšŠ', 'b':'ðš‹', 'c':'ðšŒ', 'd':'ðš', 'e':'ðšŽ', 'f':'ðš', 'g':'ðš', 'h':'ðš‘', 'i':'ðš’', 'j':'ðš“', 'k':'ðš”', 'l':'ðš•', 'm':'ðš–', 'n':'ðš—', 'o':'ðš˜', 'p':'ðš™', 'q':'ðšš', 'r':'ðš›', 's':'ðšœ', 't':'ðš', 'u':'ðšž', 'v':'ðšŸ', 'w':'ðš ', 'x':'ðš¡', 'y':'ðš¢', 'z':'ðš£',
                '0':'ðŸ¶', '1':'ðŸ·', '2':'ðŸ¸', '3':'ðŸ¹', '4':'ðŸº', '5':'ðŸ»', '6':'ðŸ¼', '7':'ðŸ½', '8':'ðŸ¾', '9':'ðŸ¿'
            }
        };

        function applyCharStyle(text, styleMap) {
            return text.split('').map(char => styleMap[char] || char).join('');
        }

        function markdownToLinkedIn(md) {
            let text = md;

            // Process multi-level styles first (bold-italic)
            // ***bolditalic*** or ___bolditalic___
            text = text.replace(/\*{3}(.*?)\*{3}/g, (match, p1) => applyCharStyle(p1, unicodeMaps.sansBoldItalic));
            text = text.replace(/_{3}(.*?)_{3}/g, (match, p1) => applyCharStyle(p1, unicodeMaps.sansBoldItalic));

            // **bold** or __bold__
            text = text.replace(/\*{2}(.*?)\*{2}/g, (match, p1) => applyCharStyle(p1, unicodeMaps.sansBold));
            text = text.replace(/_{2}(.*?)_{2}/g, (match, p1) => applyCharStyle(p1, unicodeMaps.sansBold));

            // *italic* or _italic_
            text = text.replace(/\*(.*?)\*/g, (match, p1) => applyCharStyle(p1, unicodeMaps.sansItalic));
            text = text.replace(/_(.*?)_/g, (match, p1) => applyCharStyle(p1, unicodeMaps.sansItalic));

            // ~~strikethrough~~
            text = text.replace(/~~(.*?)~~/g, (match, p1) => p1.split('').map(char => char + '\u0336').join(''));

            // `inline code`
            text = text.replace(/`(.*?)`/g, (match, p1) => applyCharStyle(p1, unicodeMaps.monospace));

            // Headings (#, ##, ### etc.) to bold
            text = text.replace(/^#{1,6}\s+(.*)/gm, (match, p1) => applyCharStyle(p1, unicodeMaps.sansBold));
            
            // Blockquotes (> quote)
            text = text.replace(/^>\s+(.*)/gm, (match, p1) => 'â–Ž ' + p1);

            // Unordered lists (* item, - item)
            text = text.replace(/^[\*\-]\s+(.*)/gm, (match, p1) => 'â€¢ ' + p1);
            
            // Ordered lists (1. item) - bold the number
            text = text.replace(/^(\d+\.)\s+(.*)/gm, (match, p1, p2) => applyCharStyle(p1, unicodeMaps.sansBold) + ' ' + p2);

            // Links [text](url) to text (url)
            text = text.replace(/\[(.*?)\]\((.*?)\)/g, (match, p1, p2) => `${p1} (${p2})`);

            return text;
        }

        markdownInput.addEventListener('input', () => {
            const mdText = markdownInput.value;
            outputTextarea.value = markdownToLinkedIn(mdText);
        });

        copyButton.addEventListener('click', () => {
            outputTextarea.select();
            outputTextarea.setSelectionRange(0, 99999); // For mobile devices

            try {
                navigator.clipboard.writeText(outputTextarea.value).then(() => {
                    const originalText = copyButton.textContent;
                    copyButton.textContent = 'Copied!';
                    copyButton.style.backgroundColor = '#28a745'; // Green for success
                    setTimeout(() => {
                        copyButton.textContent = originalText;
                        copyButton.style.backgroundColor = '#0a66c2'; // Revert to original blue
                    }, 2000);
                }).catch(err => {
                    console.error('Failed to copy text: ', err);
                    alert('Failed to copy text. Please try manually.');
                });
            } catch (err) {
                // Fallback for older browsers (less common now)
                console.warn('navigator.clipboard not available, trying execCommand.');
                try {
                    document.execCommand('copy');
                    const originalText = copyButton.textContent;
                    copyButton.textContent = 'Copied!';
                    copyButton.style.backgroundColor = '#28a745';
                    setTimeout(() => {
                        copyButton.textContent = originalText;
                        copyButton.style.backgroundColor = '#0a66c2';
                    }, 2000);
                } catch (e) {
                    console.error('Failed to copy text with execCommand: ', e);
                    alert('Failed to copy text. Please try manually.');
                }
            }
        });

        // Initial conversion if there's pre-filled text (e.g. from browser cache)
        if (markdownInput.value) {
            outputTextarea.value = markdownToLinkedIn(markdownInput.value);
        }
    </script>
</body>
</html>